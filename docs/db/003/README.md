# 쇼핑몰 주문관리 구축하기 #1


## 요구사항

### 개요

쇼핑몰의 주문을 효율적으로 관리하고 추적하기 위한 주문관리 프로그램을 개발합니다.
이 프로그램은 주문 접수부터 배송 및 결제 상태 확인, 고객 문의 관리까지 모든 주문 관련 프로세스를 중앙에서 관리할 수 있어야 합니다.

### 주요 기능 및 요구사항

| 분류              | 기능명                | 설명                                                                                                    |
| ----------------- | --------------------- | ------------------------------------------------------------------------------------------------------- |
| 주문 관리         | 주문 접수             | 고객이 주문한 상품 정보, 수량, 배송 주소, 결제 방법 등의 주문 정보를 입력 및 저장합니다.                |
|                   | 주문 상태 변경        | 주문 상태(주문 접수, 결제 완료, 상품 준비 중, 배송 중, 배송 완료 등)를 변경 및 확인할 수 있어야 합니다. |
|                   | 주문 검색 및 필터     | 주문 번호, 고객 이름, 주문 날짜 등 다양한 조건으로 주문을 검색하고 필터링할 수 있어야 합니다.           |
| 재고 관리         | 재고 조회             | 상품별 재고 수량을 실시간으로 확인할 수 있어야 합니다.                                                  |
|                   | 재고 경고             | 재고 수량이 특정 수치 이하로 떨어질 경우 알림 기능이 있어야 합니다.                                     |
| 배송 관리         | 배송 추적             | 배송 업체와 연동하여 실시간 배송 상태를 확인할 수 있어야 합니다.                                        |
|                   | 배송 문의 관리        | 고객의 배송 관련 문의사항을 관리하고, 필요한 경우 배송 업체에 문의할 수 있어야 합니다.                  |
| 결제 관리         | 다양한 결제 방법 지원 | 신용카드, 실시간 계좌이체, 휴대폰 결제 등 다양한 결제 방법을 지원해야 합니다.                           |
|                   | 환불 처리             | 고객의 환불 요청 시, 환불 절차를 관리하고 환불 상태를 확인할 수 있어야 합니다.                          |
| 고객 관리         | 고객 정보 조회        | 고객의 주문 이력, 문의 이력, 결제 이력 등을 조회할 수 있어야 합니다.                                    |
|                   | 고객 문의 관리        | 고객의 상품 및 주문 관련 문의사항을 관리하고, 담당자가 답변할 수 있어야 합니다.                         |
| 보안 및 접근 제어 | 다중 사용자 지원      | 여러 직원이 동시에 시스템을 사용할 수 있어야 합니다.                                                    |
|                   | 권한 관리             | 직원별로 접근 권한을 설정하여 특정 기능에 대한 접근을 제한할 수 있어야 합니다.                          |
| 사용자 인터페이스 | 대시보드              | 주요 주문 및 배송 상태, 재고 상태, 최근 문의사항 등을 한 눈에 볼 수 있는 대시보드가 필요합니다.         |
|                   | 반응형 디자인         | 다양한 디바이스(데스크톱, 태블릿, 모바일)에서 사용할 수 있어야 합니다.                                  |
|                   | 통계 및 보고서        | 주문량, 매출, 인기 상품 등 다양한 통계와 보고서를 생성할 수 있어야 합니다.                              |


## 요구사항에서부터 도출한 엔티티 목록

| 엔티티       | 설명                   |
| ------------ | ---------------------- |
| Orders       | 주문 정보              |
| Customers    | 고객 정보              |
| Products     | 상품 정보              |
| OrderDetails | 주문 상세 정보         |
| Shipping     | 배송 정보              |
| Payment      | 결제 정보              |
| Inquiries    | 문의사항               |
| Admins       | 관리자 정보            |
| Dashboard    | 대시보드(요약 및 캐싱) |
| Reports      | 보고서                 |


## 기능 설계

``` mermaid
mindmap
  root(쇼핑몰 주문관리 프로그램)
    주문 관리
      주문 생성
      주문 조회
      주문 상태 변경
      주문 검색 및 필터
    재고 관리
      재고 조회
      재고 업데이트
      재고 경고 알림
    배송 관리
      배송 업체 선택
      배송 상태 조회
      배송 문의 관리
    결제 관리
      결제 방법 추가
      결제 실행
      환불 요청
      환불 상태 확인
    고객 관리
      고객 정보 조회
      고객 주문 이력 조회
      고객 문의 관리
    관리자 및 권한 관리
      관리자 등록
      관리자 로그인
      관리자 권한 설정
    대시보드
      주요 상태 요약 조회
    통계 및 보고서
      통계 데이터 조회
      보고서 생성
      보고서 조회
```

```
쇼핑몰 주문관리 프로그램
|
|-- 주문 관리
|   |-- 주문 생성
|   |-- 주문 조회
|   |-- 주문 상태 변경
|   |-- 주문 검색 및 필터
|
|-- 재고 관리
|   |-- 재고 조회
|   |-- 재고 업데이트
|   |-- 재고 경고 알림
|
|-- 배송 관리
|   |-- 배송 업체 선택
|   |-- 배송 상태 조회
|   |-- 배송 문의 관리
|
|-- 결제 관리
|   |-- 결제 방법 추가
|   |-- 결제 실행
|   |-- 환불 요청
|   |-- 환불 상태 확인
|
|-- 고객 관리
|   |-- 고객 정보 조회
|   |-- 고객 주문 이력 조회
|   |-- 고객 문의 관리
|
|-- 관리자 및 권한 관리
|   |-- 관리자 등록
|   |-- 관리자 로그인
|   |-- 관리자 권한 설정
|
|-- 대시보드
|   |-- 주요 상태 요약 조회
|
|-- 통계 및 보고서
|   |-- 통계 데이터 조회
|   |-- 보고서 생성
|   |-- 보고서 조회
```

## 기능-엔티티 매핑

관점을 주문 생성으로 좁혀서 진행하는 동안 설계에서 발견하지 못한 조건을 발견하였습니다.
주문생성은 주문 입력 폼 생성과 주문 버턴을 클릭했을 때, 주문을 처리하는 두 개의 프로세스가 필요합니다.

이처럼 설계는 한 번에 완벽하게 진행되는 것이 아닙니다.
여러 설계 단계와 개발 단계를 지속적으로 반복하면서 완성되어 가는 것입니다.
마치 그림을 그릴 때 윤곽부터 시작해서 점진적으로 디테일을 완성해 나가는 것과 동일합니다.

| Process           | Entity          | CRUD |
| ----------------- | --------------- | ---- |
| 주문 입력 폼 생성 | Products        | R    |
|                   | PaymentMethods  | R    |
|                   | Customers       | R    |
|                   | Coupons         | R    |
|                   | Discounts       | R    |
|                   | ShippingAddress | R    |
|                   | Cart            | R    |
|                   | Promotions      | R    |
|                   | GiftCards       | R    |
|                   | LoyaltyPoints   | R    |
| 주문 처리         | Orders          | C    |
|                   | OrderItems      | C    |
|                   | Coupons         | U    |
|                   | Discounts       | U    |
|                   | ShippingAddress | CU   |
|                   | Cart            | U    |
|                   | GiftCards       | U    |
|                   | LoyaltyPoints   | U    |


## ERD

전체를 다 표시하게되면 복잡하기 때문에 설명을 위해서 몇 개의 테이블만 간추려서 ERD를 그려보았습니다.

``` mermaid
erDiagram
    Customers ||--o{ Orders : places
    Customers ||--o{ ShippingAddress : has
    Orders ||--|| ShippingAddress : uses
    Orders ||--o{ OrderItems : contains
    Orders ||--o{ Cart : results_in
    Products ||--o{ Cart : listed_in
    Customers ||--o{ Cart : owns
    Products ||--o{ OrderItems : has
```
